(()=>{"use strict";class e{constructor(e,t,i){this.x=e,this.y=t,this.width=44,this.height=32,this.image=new Image,this.image.src=`../assets/images/invader${i}.png`}draw(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}move(e,t){this.x+=e,this.y+=t}}const t=0,i=1,s=2,o=3;let r=document.getElementById("game"),n=r.getContext("2d");r.height=600,r.width=600;const h=new Image;h.src="../assets/images/space.png";const c=new class{movingDirection=t;xVelocity=0;yVelocity=0;defaultXVelocity=1;defaultYVelocity=1;moveDownTimerDefault=30;moveDownTimer=this.moveDownTimerDefault;invaderMap=[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,2,2,3,3,2,2,1,1],[1,1,1,2,1,1,2,1,1,1],[1,1,1,2,1,1,2,1,1,1],[1,1,1,1,1,1,1,1,1,1]];invadersRow=[];constructor(e){this.canvas=e,this.createInvaders()}draw(e){this.decrementMoveDownTimer(),this.drawInvaders(e),this.updateVelocityAndDirection(),this.resetMoveDownTimer()}drawInvaders(e){this.invadersRow.flat().forEach((t=>{t.draw(e),t.move(this.xVelocity,this.yVelocity)}))}createInvaders(){this.invaderMap.forEach(((t,i)=>{this.invadersRow[i]=[],t.forEach(((t,s)=>{t>0&&this.invadersRow[i].push(new e(50*s,35*i,t))}))}))}updateVelocityAndDirection(){console.log("update");for(const e of this.invadersRow)if(this.currentDirection==i){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;const t=e[e.length-1];if(t.x+t.width>=this.canvas.width){this.currentDirection=s;break}}else if(this.currentDirection===s){if(this.moveDown(t))break}else if(this.currentDirection===t){if(this.xVelocity=-this.defaultXVelocity,this.yVelocity=0,e[0].x<=0){this.currentDirection;break}}else if(this.currentDirection===o&&this.moveDown(i))break}moveDown(e){return this.xVelocity=0,this.yVelocity=this.defaultYVelocity,this.moveDownTimer<=0&&(this.currentDirection=e,!0)}resetMoveDownTimer(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}decrementMoveDownTimer(){this.currentDirection!==s&&this.currentDirection!==o||this.moveDownTimer--}}(r);setInterval((function(){n.drawImage(h,0,0,r.width,r.height),c.draw(n)}),1e3/60)})();